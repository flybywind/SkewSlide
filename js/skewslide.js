$(function(){function a(a){return a/Math.PI*180}function t(i){var t,r;if(i===undefined){t=1e3;r="auto"}else{t=i.duration==null?1e3:i.duration;r=i.method==null?"auto":i.method}var n=$(this);var e=function(){var a=function(a){if(!a.attr("init")){a.attr("init",1);var t=a.find(".mask-low");t.each(function(){var a=$(this);var i=a.parent();var r=i.width(),t=i.height();a.width(r).height(t/2);if(a.hasClass("above")){a.css({top:-t/2+"px",left:0})}if(a.hasClass("under")){a.css({bottom:-t/2+"px",left:0})}})}};n.on("mouseenter",function(){a($(this));var i=$(this).find(".mask-low");i.each(function(){var a=$(this);if(a.hasClass("above")){a.animate({top:0},t)}if(a.hasClass("under")){a.animate({bottom:0},t)}})});n.on("mouseleave",function(){var a=$(this).find(".mask-low");a.each(function(){var a=$(this);var r=a.parent();var i=r.height();if(a.hasClass("above")){a.animate({top:-i/2+"px"},t)}if(a.hasClass("under")){a.animate({bottom:-i/2+"px"},t)}})})};var s=function(){transformOriginName=Modernizr.prefixed("transformOrigin");transformName=Modernizr.prefixed("transform");var r=function(i){if(!i.attr("init")){i.attr("init",1);var e=i.find(".mask-high");var r=i.width(),n=i.height();var t=undefined;if(n>0&&r>0){t=Math.atan(n/r)}if(t!==undefined){e.each(function(){var e=$(this);var o=n/Math.sin(t);var f=Math.sin(t)*r;var s=Math.cos(t)*r;e.height(o).width(0).data("maskWidth",f);var i={};if(e.hasClass("lt")){i={};i[transformOriginName]="0 "+s+"px";i[transformName]="rotate("+a(Math.PI/2-t)+"deg)";i.top=-s+"px";e.css(i)}if(e.hasClass("rt")){i={};i[transformOriginName]="0 "+(o-s)+"px";i[transformName]="rotate("+a(Math.PI/2+t)+"deg)";i.top=s-o+"px";i.right=0;e.css(i)}if(e.hasClass("lb")){i={};i[transformOriginName]="0 "+(o-s)+"px";i[transformName]="rotate("+a(t-Math.PI/2)+"deg)";i.bottom=-s+"px";e.css(i)}if(e.hasClass("rb")){i={};i[transformOriginName]="0 "+s+"px";i[transformName]="rotate("+a(Math.PI/2*3-t)+"deg)";i.bottom=s-o+"px";i.right=0;e.css(i)}})}}};var i=function(t,a){a.width(t);if(a.hasClass("rt")||a.hasClass("rb")){a.css({right:-t+"px"})}};n.on("mouseenter",function(){r($(this));var n=$(this).find(".mask-high");var a=null;var e=n.eq(0).width();var s=function(r){if(a==null){a=r}var f=(r-a)/t;n.each(function(){var a=$(this);var t=a.data("maskWidth");var r=f*(t-e)+e;if(r>=t){i(t,a);return}i(r,a)});if(f>1){cancelAnimationFrame(o);return}requestAnimationFrame(s)};var o=requestAnimationFrame(s)});n.on("mouseleave",function(){var r=$(this).find(".mask-high");var a=null;var e=r.eq(0).width();var n=function(o){if(a==null){a=o}var f=(o-a)/t;r.each(function(){var a=$(this);var t=(1-f)*e;if(t<=0){a.width(0);return}i(t,a)});if(f>1){cancelAnimationFrame(s);return}requestAnimationFrame(n)};var s=requestAnimationFrame(n)})};if(r=="auto"){if(Modernizr.csstransforms&&Modernizr.requestanimationframe){s()}else{e()}}else if(r=="complex"){s()}else{e()}}$.fn.extend({addMask:function(a){t.call(this,a);return this}})});